<!DOCTYPE html>
<html>
<head>
  <title>prjcts</title>
</head>
<body>
  <h1>prjcts</h1>
  <div id="projects"></div>
  <script>
    fetch('https://api.github.com/users/alexpriest/repos?type=public')
      .then(r => r.json())
      .then(repos => {
        const container = document.getElementById('projects');
        repos
          .filter(r => r.name !== 'alexpriest.github.io')
          .sort((a, b) => new Date(b.pushed_at) - new Date(a.pushed_at))
          .forEach(r => {
            const a = document.createElement('a');
            const hasWorkingPages = r.has_pages && r.name !== 'alexpriest-raycast-extensions';
            a.href = hasWorkingPages ? `/${r.name}` : r.html_url;
            a.textContent = r.name.replace(/-/g, ' ');
            container.appendChild(a);
            const date = new Date(r.pushed_at).toISOString().split('T')[0];
            container.appendChild(document.createTextNode(` (last updated: ${date})`));
            container.appendChild(document.createElement('br'));
          });
      });
  </script>
</body>
</html>
